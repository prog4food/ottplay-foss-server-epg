# OTT-play FOSS EPG server
Сервер, собирает данные после [ott-play-epg-converter](https://github.com/prog4food/ott-play-epg-converter) в единой точке.

## Конфигурация
Настраивается файлом `config.json` в виде массива с объектами `[{},{}]`

Параметры провайдера (`!` помечены обязательные):
* `id` !- внутреннее имя источника, используется только для идентификации 
* `base_url` или `base_url_https` !- HTTP/HTTPS ссылка на источник (`/` обязателен), HTTPS пока с запасом на будущее и потом будет отдаваться клиентам, которые поддерживают его поддерживают
* `order_epg` и `order_ico` - "вес" провайдера при автоматическом поиске EPG/значков, чем меньше, тем раньше будет выбран провайдер (по умолчанию `100+порядок в конфиге`)
* `update_mins` - интервал обновления источника (в минутах, `по умолчанию 6 часов`, планировщик запускается каждые 16 минут)

Пара слов по поводу сортировки провайдеров при автоматической выборке.\
Провайдеры будут выбраны в том порядке, в котором записаны в конфигурационном файле, однако этот порядок можно изменять с помощью параметров `order_epg/order_ico`, чем меньше "вес" провайдера, тем раньше он будет выбран. По-умолчанию записи получают номер сортировки `100+порядок_в_конфиге`, например 3 провайдера будут иметь веса: 101,102,103. Учитывайте это, когда назначаете приоритеты. Провайдеры с одинаковым "весом" могут быть отсортированы случайно в рамках своего "веса" :)

### Пример конфига
Лежит в каталоге `samples/config.json`
```json
{
  "providers": [
    {"id": "it999", "base_url": "http://ott-epg.prog4food.eu.org/it999/"},
    {"id": "iptvx.one", "order_ico":91, "base_url": "http://ott-epg.prog4food.eu.org/iptvx.one/"},
  ]
}
```
